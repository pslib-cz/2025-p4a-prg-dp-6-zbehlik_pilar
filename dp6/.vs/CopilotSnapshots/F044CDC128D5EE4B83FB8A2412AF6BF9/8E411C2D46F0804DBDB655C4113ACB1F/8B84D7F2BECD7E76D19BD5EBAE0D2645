using dp6;

// See https://aka.ms/new-console-template for more information
Console.WriteLine("Hello, World!");

Console.WriteLine("=== KONFIGURACE SERVERU POMOCÍ BUILDER PATTERN ===\n");

// LOKÁLNÍ PROSTŘEDÍ - minimální konfigurace
var localConfig = ServerConfig.CreateBuilder()
    .WithAddress("localhost")
    .WithPort(8080)
    .Build();

Console.WriteLine("LOKÁL:");
Console.WriteLine(localConfig);
Console.WriteLine();

// STAGING - s logováním
var stagingConfig = ServerConfig.CreateBuilder()
    .WithAddress("staging.server.com")
    .WithPort(443)
    .WithEncryption()
    .WithLogging()
    .WithMaxConnections(200)
    .Build();

Console.WriteLine("STAGING:");
Console.WriteLine(stagingConfig);
Console.WriteLine();

// PRODUKCE - plná konfigurace
var productionConfig = ServerConfig.CreateBuilder()
    .WithAddress("prod.server.com")
    .WithPort(443)
    .WithEncryption()
    .WithMaxConnections(1000)
    .WithTimeout(60)
    .WithLogging()
    .Build();

Console.WriteLine("PRODUKCE:");
Console.WriteLine(productionConfig);
Console.WriteLine();

// Demonstrace validace - pokus o vytvoření bez povinných parametrů
Console.WriteLine("=== DEMONSTRACE VALIDACE ===");
try
{
    var invalidConfig = ServerConfig.CreateBuilder()
        .WithAddress("test.com")
        // .WithPort(8080) - chybí povinný port
        .Build();
}
catch (InvalidOperationException ex)
{
    Console.WriteLine($"✓ Validace funguje: {ex.Message}");
}

try
{
    var invalidPort = ServerConfig.CreateBuilder()
        .WithAddress("test.com")
        .WithPort(99999) // neplatný port
        .Build();
}
catch (ArgumentException ex)
{
    Console.WriteLine($"✓ Validace portu funguje: {ex.Message}");
}
